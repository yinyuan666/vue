(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6bec7bbc"],{"043a":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"movie-detail"},[e("div",{staticClass:"m-bg",style:{"background-image":"linear-gradient(to bottom, rgba(245,245,245, 0), rgba(245,245,245, .85) 50%, rgba(245,245,245, 1) 60%),url("+t.movieDetailData.images.large+")"}}),e("div",{},[e("van-nav-bar",{attrs:{title:"电影详情","left-text":"返回","left-arrow":""},on:{"click-left":t.back}})],1),e("div",{staticClass:"movie-detail-info"},[e("div",{staticClass:"movie-detail-box"},[e("div",{staticClass:"movie-detail-t"},[e("div",{staticClass:"movie-detail-img fl"},[e("div",{staticClass:"m-img"},[e("img",{staticClass:"auto-img",attrs:{src:t.movieDetailData.images.small,alt:""}})])]),e("div",{staticClass:"movie-detail-msg fl"},[e("div",{staticClass:"clearfix"},[e("span",{staticClass:"fl m-title"},[t._v(t._s(t.movieDetailData.title))]),e("span",{staticClass:"fr collection",class:{active:t.likeActive},on:{click:function(a){return t.likeMovie(t.movieDetailData)}}},[e("van-icon",{attrs:{name:"like-o"}})],1)]),e("div",{staticClass:"m-type"},[t._v(t._s(t.movieDetailData.genresInfo))]),e("div",{staticClass:"clearfix m-info"},[e("div",{staticClass:"fl"},[e("span",[e("van-icon",{attrs:{name:"comment-circle-o"}})],1),t._v(" "+t._s(t.movieDetailData.comments))]),e("div",{staticClass:"fl"},[e("span",[e("van-icon",{attrs:{name:"underway-o"}})],1),t._v(" "+t._s(t.movieDetailData.durations[0]))])]),e("div",{staticClass:"star-box clearfix"},[e("div",{ref:"notstar",staticClass:"not-star fl"},[e("span",[e("van-icon",{attrs:{name:"star-o"}})],1),e("span",[e("van-icon",{attrs:{name:"star-o"}})],1),e("span",[e("van-icon",{attrs:{name:"star-o"}})],1),e("span",[e("van-icon",{attrs:{name:"star-o"}})],1),e("span",[e("van-icon",{attrs:{name:"star-o"}})],1)]),e("div",{staticClass:"yes-star",style:{width:t.movieDetailData.width+"px"}},[e("span",[e("van-icon",{attrs:{name:"star-o"}})],1),e("span",[e("van-icon",{attrs:{name:"star-o"}})],1),e("span",[e("van-icon",{attrs:{name:"star-o"}})],1),e("span",[e("van-icon",{attrs:{name:"star-o"}})],1),e("span",[e("van-icon",{attrs:{name:"star-o"}})],1)]),e("div",{staticClass:"fl star-score"},[t._v(t._s(t.movieDetailData.rating.average))])])])]),e("div",{staticClass:"movie-detail-b"},[e("div",{staticClass:"mb-title"},[t._v("电影概括")]),e("p",{staticClass:"m-text",style:{display:t.display}},[t._v(t._s(t.movieDetailData.summary))])]),e("div",{staticClass:"arrow",on:{click:t.changeDisplay}},[e("van-icon",{attrs:{name:"arrow-down"}})],1)]),e("div",{staticClass:"tab-box"},[e("van-tabs",{attrs:{animated:"",color:"#FF9E01"},model:{value:t.tagActive,callback:function(a){t.tagActive=a},expression:"tagActive"}},[e("van-tab",{attrs:{title:"影人信息"}},[e("div",{staticClass:"yanyuan"},[e("div",{staticClass:"yanyuan-box clearfix",style:{width:t.movieDetailData.casts.length*t.movieDetailData.w+"px"}},t._l(t.movieDetailData.casts,(function(a,i){return e("div",{key:i,ref:"yanyuan",refInFor:!0,staticClass:"yanyuan-item"},[e("div",{staticClass:"name-img"},[e("img",{staticClass:"auto-img",attrs:{src:a.avatars.small,alt:""}})]),e("div",{staticClass:"name one-text"},[t._v(t._s(a.name))])])})),0)])]),e("van-tab",{attrs:{title:"电影剧照"}},[t._v(" 电影剧照 ")]),e("van-tab",{attrs:{title:"热门评论"}},[t._v(" 热门评论 ")])],1)],1)]),e("div",{staticClass:"buy-btn",on:{click:function(a){return t.buyTick(t.movieDetailData.id)}}},[t._v("立马购票")])])},r=[],n=(e("a4d3"),e("4de4"),e("4160"),e("a15b"),e("b680"),e("e439"),e("dbb4"),e("b64b"),e("159b"),e("ade3")),s=e("2f62");function o(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);a&&(i=i.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),e.push.apply(e,i)}return e}function c(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?o(Object(e),!0).forEach((function(a){Object(n["a"])(t,a,e[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):o(Object(e)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))}))}return t}var l=Object(s["a"])("movieDetailModule"),v=l.mapState,u=l.mapMutations,m={name:"movieDetail",data:function(){return{tagActive:0}},computed:c({},v(["movieDetailData","display","likeActive"])),methods:c({},u(["changeDisplay","resetState"]),{back:function(){this.$router.go(-1)},likeMovie:function(t){var a=localStorage.getItem("user");if(a){if(a=JSON.parse(a),!a.isLogin)return this.$router.push({name:"login"});var e=localStorage.getItem("likeMovieData");e=e?JSON.parse(e):{};var i=e[a.username];i||(e[a.username]=[]);for(var r=0;r<e[a.username].length;r++)if(e[a.username][r].id==t.id)return void this.$toast("你已经收藏过该电影");this.$store.commit("movieDetailModule/changelikeActive",!0),e[a.username].unshift(t),localStorage.setItem("likeMovieData",JSON.stringify(e)),this.$toast.success("收藏成功")}else this.$router.push({name:"login"})},buyTick:function(t){this.$router.push({name:"buyMovieTick",query:{id:t}})}}),created:function(){var t=this;this.$toast.loading({duration:0,message:"加载中..."}),this.resetState();var a=this.$route.params.id;this.axios({method:"GET",url:"https://douban.uieee.com/v2/movie/subject/"+a}).then((function(a){a.data.genresInfo=a.data.genres.join(" / ");var e=a.data.comments_count;a.data.comments=e>=1e4?(e/1e4).toFixed(1)+"w":e>=1e3?(e/1e3).toFixed(1)+"k":e;var i=t.$refs.notstar.clientWidth;a.data.width=a.data.rating.average/a.data.rating.max*i,a.data.w=0,t.$store.dispatch("movieDetailModule/getMovieDetailData",a.data).then((function(){t.$toast.clear();var a=t.$refs.yanyuan[0].clientWidth;t.$store.commit("movieDetailModule/changeW",a);var e=localStorage.getItem("user"),i=e&&JSON.parse(e).isLogin;if(i){var r=JSON.parse(e).username,n=localStorage.getItem("likeMovieData");n=n?JSON.parse(n):{};var s=n[r];s=s||[];for(var o=0;o<s.length;o++)if(t.movieDetailData.id==s[o].id)return void t.$store.commit("movieDetailModule/changelikeActive",!0);t.$store.commit("movieDetailModule/changelikeActive",!1)}else t.$store.commit("movieDetailModule/changelikeActive",!1)}))})).catch((function(a){t.$toast.clear()}))}},d=m,f=(e("ea0b"),e("2877")),b=Object(f["a"])(d,i,r,!1,null,"0c715a48",null);a["default"]=b.exports},1148:function(t,a,e){"use strict";var i=e("a691"),r=e("1d80");t.exports="".repeat||function(t){var a=String(r(this)),e="",n=i(t);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(a+=a))1&n&&(e+=a);return e}},"408a":function(t,a,e){var i=e("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=i(t))throw TypeError("Incorrect invocation");return+t}},"4de4":function(t,a,e){"use strict";var i=e("23e7"),r=e("b727").filter,n=e("d039"),s=e("1dde"),o=s("filter"),c=o&&!n((function(){[].filter.call({length:-1,0:1},(function(t){throw t}))}));i({target:"Array",proto:!0,forced:!o||!c},{filter:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},a15b:function(t,a,e){"use strict";var i=e("23e7"),r=e("44ad"),n=e("fc6a"),s=e("b301"),o=[].join,c=r!=Object,l=s("join",",");i({target:"Array",proto:!0,forced:c||l},{join:function(t){return o.call(n(this),void 0===t?",":t)}})},a356:function(t,a,e){},ade3:function(t,a,e){"use strict";function i(t,a,e){return a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}e.d(a,"a",(function(){return i}))},b64b:function(t,a,e){var i=e("23e7"),r=e("7b0b"),n=e("df75"),s=e("d039"),o=s((function(){n(1)}));i({target:"Object",stat:!0,forced:o},{keys:function(t){return n(r(t))}})},b680:function(t,a,e){"use strict";var i=e("23e7"),r=e("a691"),n=e("408a"),s=e("1148"),o=e("d039"),c=1..toFixed,l=Math.floor,v=function(t,a,e){return 0===a?e:a%2===1?v(t,a-1,e*t):v(t*t,a/2,e)},u=function(t){var a=0,e=t;while(e>=4096)a+=12,e/=4096;while(e>=2)a+=1,e/=2;return a},m=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!o((function(){c.call({})}));i({target:"Number",proto:!0,forced:m},{toFixed:function(t){var a,e,i,o,c=n(this),m=r(t),d=[0,0,0,0,0,0],f="",b="0",g=function(t,a){var e=-1,i=a;while(++e<6)i+=t*d[e],d[e]=i%1e7,i=l(i/1e7)},p=function(t){var a=6,e=0;while(--a>=0)e+=d[a],d[a]=l(e/t),e=e%t*1e7},h=function(){var t=6,a="";while(--t>=0)if(""!==a||0===t||0!==d[t]){var e=String(d[t]);a=""===a?e:a+s.call("0",7-e.length)+e}return a};if(m<0||m>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(f="-",c=-c),c>1e-21)if(a=u(c*v(2,69,1))-69,e=a<0?c*v(2,-a,1):c/v(2,a,1),e*=4503599627370496,a=52-a,a>0){g(0,e),i=m;while(i>=7)g(1e7,0),i-=7;g(v(10,i,1),0),i=a-1;while(i>=23)p(1<<23),i-=23;p(1<<i),g(1,1),p(2),b=h()}else g(0,e),g(1<<-a,0),b=h()+s.call("0",m);return m>0?(o=b.length,b=f+(o<=m?"0."+s.call("0",m-o)+b:b.slice(0,o-m)+"."+b.slice(o-m))):b=f+b,b}})},dbb4:function(t,a,e){var i=e("23e7"),r=e("83ab"),n=e("56ef"),s=e("fc6a"),o=e("06cf"),c=e("8418");i({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(t){var a,e,i=s(t),r=o.f,l=n(i),v={},u=0;while(l.length>u)e=r(i,a=l[u++]),void 0!==e&&c(v,a,e);return v}})},e439:function(t,a,e){var i=e("23e7"),r=e("d039"),n=e("fc6a"),s=e("06cf").f,o=e("83ab"),c=r((function(){s(1)})),l=!o||c;i({target:"Object",stat:!0,forced:l,sham:!o},{getOwnPropertyDescriptor:function(t,a){return s(n(t),a)}})},ea0b:function(t,a,e){"use strict";var i=e("a356"),r=e.n(i);r.a}}]);
//# sourceMappingURL=chunk-6bec7bbc.30768b35.js.map